<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>EE Sintesi</title>

	<link rel="stylesheet" rel="stylesheet" href="pure/pure-min.css"/>
    <link rel="stylesheet" rel="stylesheet" href="chartist/dist/chartist.min.css"/>
    
    <link rel="stylesheet" rel="stylesheet" href="ee_sintesi.css"/>
    <link rel="stylesheet" rel="stylesheet" href="css/charts.css"/>
    
    <page size="A4">
    
    <script src="customs.js"></script>
    <script src="chartist/dist/chartist.min.js"></script>
	<script src="axistitle/dist/chartist-plugin-axistitle.min.js"></script>
	
	<script type="text/javascript">
		function checkValoreNumerico(val) {
			if (val) {
				val = val.trim();
				if (val && !isNaN(val))
					return Number(val);
			}
			return 0;
		}	
	</script>
</head>
<body>

<!-- ********************** PAGINA 1 INIZIO ********************** -->
<div id="pagina1">
	<!-- LOGHI - start ========== -->
	<div id="headerLogo" class="pure-g">
		<div class="pure-u-12-24">
			<div class="logo-oe"><img src="images/logo-oe.png" alt="logo-oe" /></div>
		</div>
		<div class="pure-u-12-24">
			<div class="logo-rina"><img src="images/logo-rina.png" alt="logo-rina"/></div>
		</div>
	</div>
	<!-- ========== end - LOGHI -->
	
	
	<!-- @DATI FORNITURA - start ==========
		 ================================== -->
	<div id="datiFornitura" class="pure-g">
		<div class="pure-u-12-24">
			<div class="dati-colonna-left">
				<div class="titolo sfondo-arancione"><strong>DATI FORNITURA</strong></div>
				<div class="contenuto pure-g">
					<div class="pure-u-14-24">
						<div class="etichetta">Forniamo energia elettrica in</div>
						<div class="valore">
							<span data-data_type="single" data-first_node="ClienteFinaleIndirizzo" data-path_type="xpath" data-path_data="">Via della Prova non Proprio Provata 123</span>
						</div>
						<div class="etichetta">Denominazione contratto (offerta)</div>
						<div class="valore">
							<span data-data_type="single" data-first_node="Offerta" data-path_type="xpath" data-path_data="">Offerta di prova</span>
						</div>
						<div class="etichetta">Tipologia cliente</div>
						<div class="valore">
							<span data-data_type="single" data-first_node="TipoUso" data-path_type="xpath" data-path_data="">Domestico</span>
						</div>
						<div class="etichetta">Tipologia pagamento</div>
						<div class="valore">
							<span data-data_type="single" data-first_node="TipoPagamento" data-path_type="xpath" data-path_data="">??</span>						
						</div>
					</div>
					<div class="pure-u-10-24">
						<div class="etichetta">Data di attivazione della fornitura</div>
						<div class="valore">
							<span data-data_type="single" data-first_node="DataAttivazioneFornitura" data-path_type="xpath" data-path_data="">01/01/2016</span>
						</div>
						<div class="etichetta">Tensione di fornitura</div>
						<div class="valore">
							<span data-data_type="single" data-first_node="TensioneAlimentazione" data-path_type="xpath" data-path_data="">000000000</span> Volt
						</div>
						<div class="etichetta">Potenza contattualmente impegnata</div>
						<div class="valore">
							<span data-data_type="single" data-first_node="PotenzaImpegnata" data-path_type="xpath" data-path_data="">000000000</span> kW
						</div>
						<div class="etichetta">Potenza disponibile</div>
						<div class="valore">
							<span data-data_type="single" data-first_node="PotenzaDisponibile" data-path_type="xpath" data-path_data="">000000000</span> kW
						</div>
						<div class="etichetta">Livello massimo di potenza</div>
						<div class="valore">
							<span data-data_type="single" data-first_node="PotenzaDisponibile" data-path_type="xpath" data-path_data="">??</span> kW
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="pure-u-12-24">
			<div class="dati-colonna-right">
				<!-- QR code + Identificativo cliente  -->
				<div class="pure-g qr-code-plus-identificativo-cliente">
					<div class="pure-u-1-2 qr-code">
						<div class="qr-code"><img src="images/qr-code.png" alt="qr-code"/></div>
					</div>
					<div class="pure-u-1-2 identificativo-cliente">
						??
					</div>
				</div>
				<!-- Spedizione + Tipologia bolletta -->
				<div class="pure-g spedizione-plus-tipo-bolletta">
					<div class="pure-u-11-24 ">
						<div class="spedizione">
							<div data-data_type="single" data-first_node="SpedizionePresso" data-path_type="xpath" data-path_data="">Nome Cognome</div>							
			                <div data-data_type="single" data-first_node="SpedizioneIndirizzo" data-path_type="xpath" data-path_data="">via numero civico</div>
			                <div >
			                	<span data-data_type="single" data-first_node="SpedizioneCap" data-path_type="xpath" data-path_data="">CAP</span>
				                <span data-data_type="single" data-first_node="SpedizioneCitta" data-path_type="xpath" data-path_data="">Comune</span>
				                <span data-data_type="single" data-first_node="SpedizioneProvincia" data-path_type="xpath" data-path_data="">PR</span>
			                </div>
            			</div>
					</div>
					<div class="pure-u-13-24 codice-cliente">
						<div class="tipo-bolletta">
							<div class="tipo">Bolletta Energia Elettrica</div>
							<div class="tipo-mercato" data-data_type="single" data-first_node="TipoMercato" data-path_type="xpath" data-path_data="">Mercato di prova</div>
							<div class="lampadina">
								<img src="images/lampadina.png" alt="lampadina"/>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- ========== end - DATI FORNITURA -->
	
	
	<!-- @CLIENTE/BOLLETTA/IMPORTO - start ==========
		 ============================================ -->		
	<!-- ========== end - CLIENTE/PERIODO/IMPORTO -->

	
	<!-- @SINTESI IMPORTI - start ==========
	     =================================== -->
	<!-- ****** dati nascosti ****** -->
	<!-- ========== end - SINTESI IMPORTI -->
	
	
	<!-- @CONTATTI/AUTOLETTURA/GUASTI - start ==========
	     ============================================== -->	
	<!-- ========== end - CONTATTI/AUTOLETTURA/GUASTI -->		
	
		
	<!-- @FOOTER PAGINA 1 - start ==========
	     =================================== -->
	<!-- ========== end - FOOTER PAGINA 1 -->	
</div>
<!-- ********************** PAGINA 1 FINE ************************ -->



<!-- ********************** PAGINA 2 INIZIO ************************ -->
<div id="pagina2">
	<!-- @QUADRO LETTURE E CONSUMI - start ==========
	     ============================================ -->
	<!-- ****** dati ****** -->
	<div id="datiQuadroLettureEConsumi" style="display: none;">
		<!-- dati distributore -->
		<div class="datiQuadroLettureEConsumi distributoreMese">giu 19</div>
		<div class="datiQuadroLettureEConsumi distributoreTipoDato">48</div>
		<div class="datiQuadroLettureEConsumi distributoreF1">54</div>
		<div class="datiQuadroLettureEConsumi distributoreF2">75</div>
		<div class="datiQuadroLettureEConsumi distributoreF3">4</div>
		<!-- dati stima -->
		<div class="datiQuadroLettureEConsumi stimaMese">lug 19</div>
		<div class="datiQuadroLettureEConsumi stimaTipoDato">45</div>
		<div class="datiQuadroLettureEConsumi stimaF1">53</div>
		<div class="datiQuadroLettureEConsumi stimaF2">58</div>
		<div class="datiQuadroLettureEConsumi stimaF3">2</div>
	</div>
	
	<div id="quadroLettureEConsumi" class="pure-g">
		<div class="pure-u-24-24">
			<div class="pure-g titolo sfondo-arancione">
				<div class="pure-u-24-24 contenuto">QUADRO LETTURE E CONSUMI</div>
			</div>
			<div class="pure-g">
				<div class="pure-u-9-24 grafico">
					<div class="contenuto">
						<div id="graficoQuadroLettureEConsumi"></div>
					</div>
				</div>
				<div class="pure-u-15-24">
					<div class="legenda-grafico-plus-tabella-dati">
						<div class="legenda">
							<div class="voce-legenda">
								<div class="box-colorato tipoDato"></div><div class="etichetta">Tipo Dato</div>
							</div>
							<div class="voce-legenda">
								<div class="box-colorato f1"></div><div class="etichetta">Consumo Fatturato [kWh] F1</div>
							</div>
							<div class="voce-legenda">
								<div class="box-colorato f2"></div><div class="etichetta">Consumo Fatturato [kWh] F2</div>
							</div>
							<div class="voce-legenda">
								<div class="box-colorato f3"></div><div class="etichetta">Consumo Fatturato [kWh] F3</div>
							</div>
						</div>
						<div class="tabella-dati">
							<table id="tabellaQuadroLettureEConsumi">
								<tbody>
									<tr>
										<td class="c1 header no-border"></td>
										<td class="c2 header no-border"></td>
										<td class="c3 header" colspan="4">Lettura Precedente</td>
										<td class="c4 header" colspan="4">Lettura Attuale</td>
										<td class="c5 header last" colspan="4">Consumo Fatturato [kWh]</td>
									</tr>
									<tr>
										<td>Mese/anno</td>
										<td>Tipo Dato</td>
										<!--  -->
										<td>Data</td><td>F1</td><td>F2</td><td>F3</td>
										<!--  -->
										<td>Data</td><td>F1</td><td>F2</td><td>F3</td>
										<!--  -->
										<td>F1</td><td>F2</td><td>F3</td><td class="last">Totale</td>
									</tr>
									<tr>
										<td><span>giu-19 ??</span></td>
										<td><span>Distributore ??</span></td>
										<!--  -->
										<td><span>31/05/2019 ??</span></td>
										<td><span>1 ??</span></td>
										<td><span>2 ??</span></td>
										<td><span>3 ??</span></td>
										<!--  -->
										<td><span>30/06/2019 ??</span></td>
										<td><span>1 ??</span></td>
										<td><span>2 ??</span></td>
										<td><span>3 ??</span></td>
										<!--  -->
										<td><span>48 ??</span></td>
										<td><span>54 ??</span></td>
										<td><span>76 ??</span></td>
										<td class="last"><span>178 ??</span></td>
									</tr>
									<tr>
										<td><span>Lug-19 ??</span></td>
										<td><span>Stima ??</span></td>
										<!--  -->
										<td><span>31/06/2019 ??</span></td>
										<td><span>1 ??</span></td>
										<td><span>2 ??</span></td>
										<td><span>3 ??</span></td>
										<!--  -->
										<td><span>30/07/2019 ??</span></td>
										<td><span>1 ??</span></td>
										<td><span>2 ??</span></td>
										<td><span>3 ??</span></td>
										<!--  -->
										<td><span>48 ??</span></td>
										<td><span>54 ??</span></td>
										<td><span>76 ??</span></td>
										<td class="last"><span>178 ??</span></td>
									</tr>
								</tbody>
							</table>	
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<!-- ****** js - grafico e valori calcolati ****** -->
	<script type="text/javascript">
		try {
			(function() {
				var distributoreMese = document.getElementsByClassName('datiQuadroLettureEConsumi distributoreMese')[0].innerHTML;
    			var distributoreTipoDato = checkValoreNumerico(document.getElementsByClassName('datiQuadroLettureEConsumi distributoreTipoDato')[0].innerHTML);
    			var distributoreF1 = checkValoreNumerico(document.getElementsByClassName('datiQuadroLettureEConsumi distributoreF1')[0].innerHTML);
    			var distributoreF2 = checkValoreNumerico(document.getElementsByClassName('datiQuadroLettureEConsumi distributoreF2')[0].innerHTML);
    			var distributoreF3 = checkValoreNumerico(document.getElementsByClassName('datiQuadroLettureEConsumi distributoreF3')[0].innerHTML);
    			var distributoreSum = distributoreTipoDato + distributoreF1 + distributoreF2 + distributoreF3; 
    			
    			var stimaMese = document.getElementsByClassName('datiQuadroLettureEConsumi stimaMese')[0].innerHTML;
    			var stimaTipoDato = checkValoreNumerico(document.getElementsByClassName('datiQuadroLettureEConsumi stimaTipoDato')[0].innerHTML);
    			var stimaF1 = checkValoreNumerico(document.getElementsByClassName('datiQuadroLettureEConsumi stimaF1')[0].innerHTML);
    			var stimaF2 = checkValoreNumerico(document.getElementsByClassName('datiQuadroLettureEConsumi stimaF2')[0].innerHTML);
    			var stimaF3 = checkValoreNumerico(document.getElementsByClassName('datiQuadroLettureEConsumi stimaF3')[0].innerHTML);
    			var stimaSum = stimaTipoDato + stimaF1 + stimaF2 + stimaF3;
    			
				new Chartist.Bar('#graficoQuadroLettureEConsumi', {
					labels : [ 'Distributore' , 'Stima' ],
					series : [ {
							name : 'tipoDato',
							className : 'tipoDato',
							data : [ distributoreTipoDato, stimaTipoDato ]
						}, {
							name : 'f1',
							className : 'f1',
							data : [ distributoreF1, stimaF1 ]
						}, {
							name : 'f2',
							className : 'f2',
							data : [ distributoreF2, stimaF2 ]
						}, {
							name : 'f3',
							className : 'f3',
							data : [ distributoreF3, stimaF3 ]
						} ]
					}, {
						stackBars : true,
					    showGrid: true,
					    axisX: {
							labelInterpolationFnc: function(value) {
						    	return value + '\n' + (value === 'Distributore' ? distributoreSum : stimaSum) + '\n' + (value === 'Distributore' ? distributoreMese : stimaMese);
						    }
						},
						chartPadding: {
							bottom: 15 // consente di mostrare le labels dell'asse X qualora la loro altezza superasse i 20px (valore di default?)
					  	},
					}).on('draw', function(data) {
						if (data.type === 'bar') {
							data.element.attr({
								style : 'stroke-width: 38px'
							});
						}
					});
			})();
		} catch (err) {
			console.log('errore init graficoQuadroLettureEConsumi', err);
		}
	</script>
    <!-- ========== end - QUADRO LETTURE E CONSUMI -->
    
	
	<!-- @RIEPILOGO CONSUMI STORICI - start ==========
	     ============================================= -->
	<!-- ****** dati nascosti ****** -->
	<div style="display: none;" class="consumi_hiddenvalues" data-data_type="simple_loop" data-first_node="ConsumoAnnuo" data-path_type="xpath" data-path_data="Consumi">
        <span class="x_consumi_sequenzamese" data-data_type="simple_loop_data" data-path_type="xpath" data-path_data="/SequenzaMese">1</span>
        <span class="x_consumi_anno" data-data_type="simple_loop_data" data-path_type="xpath" data-path_data="/Anno">2015</span>
        <span class="x_consumi_mese" data-data_type="simple_loop_data" data-path_type="xpath" data-path_data="/Mese">06</span>
        <span class="x_consumi_f1" data-data_type="simple_loop_data" data-path_type="xpath" data-path_data="/F1">10</span>
        <span class="x_consumi_f2" data-data_type="simple_loop_data" data-path_type="xpath" data-path_data="/F2">20</span>
        <span class="x_consumi_f3" data-data_type="simple_loop_data" data-path_type="xpath" data-path_data="/F3">30</span>
        <span class="x_consumi_totale" data-data_type="simple_loop_data" data-path_type="xpath" data-path_data="/TotaleEnergiaAttiva">690</span>
		<span class="x_consumi_picco" data-data_type="simple_loop_data" data-path_type="xpath" data-path_data="/Picco">3000</span>
    </div>
	
	<div id="riepilogoConsumiStorici" class="pure-g">
		<div class="pure-u-24-24">
			<div class="pure-g titolo sfondo-arancione">
				<div class="pure-u-24-24 contenuto">RIEPILOGO CONSUMI STORICI</div>
			</div>
			<div class="pure-g">
				<div class="pure-u-9-24 grafico">
					<div class="contenuto">
						<div id="graficoRiepilogoConsumiStorici"></div>
					</div>
				</div>
				<div class="pure-u-15-24">
					
				</div>
			</div>
		</div>
	</div>
	
	<!-- ****** js - grafico e valori calcolati ****** -->
	<script type="text/javascript">
		try {
			(function() {
				var anni = [];
				var mesi = [];
				var datiF1 = [];
				var datiF2 = [];
				var datiF3 = [];
				
				var elems = document.getElementsByClassName('x_consumi_anno');
				for (var i = 0; i < elems.length; i++) {
					anni.push(elems[i].innerHTML);
				}
				elems = document.getElementsByClassName('x_consumi_mese');
				for (var i = 0; i < elems.length; i++) {
					mesi.push(elems[i].innerHTML);
				}
				elems = document.getElementsByClassName('x_consumi_f1');
				for (var i = 0; i < elems.length; i++) {
					datiF1.push(elems[i].innerHTML);
				}
				elems = document.getElementsByClassName('x_consumi_f2');
				for (var i = 0; i < elems.length; i++) {
					datiF2.push(elems[i].innerHTML);
				}
				elems = document.getElementsByClassName('x_consumi_f3');
				for (var i = 0; i < elems.length; i++) {
					datiF3.push(elems[i].innerHTML);
				}
				
				var labels = [];
				for (var i = 0; i < anni.length; i++) {
					labels.push(mesi[i] + '-' + anni[i])
				}

				console.log(anni);
				console.log(mesi);
				console.log(datiF1);
				console.log(datiF2);
				console.log(datiF3);
				console.log(labels);
				
				new Chartist.Bar('#riepilogoConsumiStorici', {
					labels : labels,
					series : [{
							name : 'f1',
							className : 'f1',
							data : datiF1
						}, {
							name : 'f2',
							className : 'f2',
							data : datiF2
						}, {
							name : 'f3',
							className : 'f3',
							data : datiF3
						}]
					}, {
						stackBars : true,
					    showGrid: true,
					    axisX: {
							labelInterpolationFnc: function(value) {
						    	return value;
						    }
						},
						chartPadding: {
							bottom: 15 // consente di mostrare le labels dell'asse X qualora la loro altezza superasse i 20px (valore di default?)
					  	},
					}).on('draw', function(data) {
						if (data.type === 'bar') {
							data.element.attr({
								style : 'stroke-width: 38px'
							});
						}
					});
			})();
		} catch (err) {
			console.log('errore init grafico riepilogo consumi storici', err);
		}
	</script>
	<!-- ========== end - RIEPILOGO CONSUMI STORICI -->
	
	
	<!-- @RIEPILOGO QUANTITA' E COSTI MEDI FATTURATI - start ==========
	     =============================================================== -->
	<!-- ========== end - RIEPILOGO QUANTITA' E COSTI MEDI FATTURATI -->
	
	
	<!-- @CONGUAGLI RICALCOLI NON PAGATE - start ==========
	     ================================================== -->
	<!-- ========== end - CONGUAGLI RICALCOLI NON PAGATE -->
	
	
	<!-- @GUIDA LETTURA FATTURA - start ==========
	     ========================================= -->
	<!-- ========== end - GUIDA LETTURA FATTURA -->
		
	
	<!-- @FOOTER PAGINA 2 - start ==========
	     =================================== -->
	<!-- ========== end - FOOTER PAGINA 2 -->
</div>	
<!-- ********************** PAGINA 2 FINE ************************ -->



<!-- ********************** PAGINA 3 INIZIO ************************ -->
<div id="pagina3">
	<!-- @ARERA - start ==========
	     ========================= -->	
	<!-- ========== end - GUIDA LETTURA FATTURA -->
	
	
	<!-- @FOOTER PAGINA 3 - start ==========
	     =================================== -->
	<!-- ========== end - FOOTER PAGINA 3 -->
</div>
<!-- ********************** PAGINA 3 FINE ************************ -->
	
	
	

	
	
	
	
    
</body>
</html>